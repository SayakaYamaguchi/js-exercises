/*
## å•é¡Œ 12.4 ğŸ’»ğŸ§ª
å€¤ãŒå¿…è¦ã«ãªã‚‹ã¾ã§å®Ÿéš›ã®è¨ˆç®—ã‚’è¡Œã‚ãªã„è©•ä¾¡æˆ¦ç•¥ã‚’é…å»¶è©•ä¾¡ã¨å‘¼ã¶ã€‚ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿é–¢æ•°ã¯`next()`ãŒå‘¼ã°ã‚Œã‚‹ã¾ã§è©•ä¾¡ãŒé…å»¶ã•ã‚Œã‚‹é–¢æ•°ã¨è€ƒãˆã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚
é…å»¶è©•ä¾¡ã‚’è¡Œã†ã“ã¨ã§ã€ä¾‹ãˆã°ç´ æ•°ã®ã‚ˆã†ãªç„¡é™ã«ç¶šãå€¤ã‚’æ‰±ã†ã“ã¨ãŒã§ãã‚‹ã€‚
å‘¼ã³å‡ºã—ã”ã¨ã«ç´ æ•°ã‚’é †ç•ªã«è¿”ã™ç„¡é™ã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ã‚’å®Ÿè£…ã—ãªã•ã„ã€‚ç´ æ•°ã‚’è¨ˆç®—ã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ã—ã¦ã‚¨ãƒ©ãƒˆã‚¹ãƒ†ãƒã‚¹ã®ç¯©[^1]ã‚’ä½¿ã„ãªã•ã„ã€‚
[^1]: `https://ja.wikipedia.org/wiki/%E3%82%A8%E3%83%A9%E3%83%88%E3%82%B9%E3%83%86%E3%83%8D%E3%82%B9%E3%81%AE%E7%AF%A9`
**å‡ºé¡Œç¯„å›²**: 12.3
*/

export function* generator(){
    let numbers = [];       // ç´ æ•°åˆ¤å®šç”¨ã®é…åˆ—
    let currentNumber = 2;  // ç¾åœ¨ã®æ•°ã‚’2ã‹ã‚‰é–‹å§‹

    // ç„¡é™ãƒ«ãƒ¼ãƒ—
    while(true){
        if (currentNumber >= numbers.length) {
            numbers.length = currentNumber + 1; // å¿…è¦ã«å¿œã˜ã¦é…åˆ—ã‚’æ‹¡å¼µ
        }
        if (!numbers[currentNumber]) {      // ç¾åœ¨ã®æ•°ãŒç´ æ•°ã§ã‚ã‚Œã°
            yield currentNumber;            // ç´ æ•°ã‚’è¿”ã™
            // ç¾åœ¨ã®æ•°ã®å€æ•°ã‚’éç´ æ•°ã¨ã—ã¦ãƒãƒ¼ã‚¯

            // numbers.lengthã§ã¯4ã‚’ç´ æ•°ã¨ã—ã¦è¨ˆç®—ã—ã¦ã—ã¾ã£ãŸã€‚
//            for (let i = currentNumber * currentNumber; i < numbers.length; i += currentNumber) {
            for (let i = currentNumber * currentNumber; i < 100000; i += currentNumber) {
                numbers[i] = true;
            }
        }
        currentNumber++; // æ¬¡ã®æ•°ã¸
    }
}
