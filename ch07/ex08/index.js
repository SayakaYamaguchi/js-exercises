/*
## å•é¡Œ 7.8 ğŸ’»ğŸ“„

æ–‡å­—åˆ—ã®æ›¸è¨˜ç´ ã‚’åè»¢ã•ã›ã‚‹é–¢æ•°ã‚’å®Ÿè£…ã—ãªã•ã„ã€‚ä¾‹ãˆã° "å®¶æ— ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§" ãŒä¸ãˆã‚‰ã‚Œã‚Œã° "ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§ æ—å®¶" ã‚’è¿”ã—ãªã•ã„ã€‚
ãƒ’ãƒ³ãƒˆ: [Intl.Segmenter](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Intl/Segmenter)
ã‚’ä½¿ã†ã‹ ã‚¼ãƒ­å¹…æ¥åˆå­ ã«ã¤ã„ã¦èª¿ã¹ã¦å®Ÿè£…ã—ãªã•ã„ã€‚( [Intl.Segmenter](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Global_Objects/Intl/Segmenter)ã‚’ä½¿ã†å ´åˆ tsconfig.js ã§ ES2022 ä»¥ä¸Šã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚)

æ–‡å­—åˆ—ã®æ›¸è¨˜ç´ ï¼ˆgraphemeï¼‰:ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¸€ã¤ã®æ–‡å­—ã¨ã—ã¦èªè­˜ã™ã‚‹ãƒ†ã‚­ã‚¹ãƒˆã®å˜ä½
ä¸€èˆ¬çš„ãª1æ–‡å­—ã¯1ã¤ã®æ›¸è¨˜ç´ ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ãŒã€ä¸€éƒ¨ã®çµµæ–‡å­—ã‚„åˆæˆæ–‡å­—ï¼ˆä¾‹ï¼šçµµæ–‡å­—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã‚„ã‚¹ã‚­ãƒ³ã‚«ãƒ©ãƒ¼ä¿®é£¾å­ãªã©ï¼‰ã¯ã€è¤‡æ•°ã®ã‚³ãƒ¼ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‹ã‚‰æ§‹æˆã•ã‚Œã‚‹ãŸã‚ã€è¤‡æ•°ã®æ›¸è¨˜ç´ ã¨ã—ã¦æ‰±ã‚ã‚Œã¾ã™ã€‚

Intl.Segmenter
å›½éš›åŒ–ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã‚’æ­£ç¢ºã«ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåŒ–ã™ã‚‹ãŸã‚ã®API
ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåŒ–ã¯ã€ãƒ†ã‚­ã‚¹ãƒˆã‚’æ„å‘³ã®ã‚ã‚‹å˜ä½ã«åˆ†å‰²ã™ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã§ã™ã€‚ä¾‹ãˆã°ã€æ–‡å­—ã€å˜èªã€æ–‡ã€è¡Œãªã©ã®å˜ä½ã«åˆ†å‰²ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

new Intl.Segmenter("ja", { granularities: ["graphemeCluster"] })
"ja"ã€€â†’ã€€ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹éš›ã®è¨€èªã‚¿ã‚°
granularitiesã€€â†’ã€€ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ç²’åº¦ã‚’è¨­å®š
ã€€graphemeClusterï¼šæ›¸è¨˜ç´ ã‚¯ãƒ©ã‚¹ã‚¿ã«åŸºã¥ã„ã¦ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã„ã¾ã™ã€‚æ›¸è¨˜ç´ ã‚¯ãƒ©ã‚¹ã‚¿ã¯ã€ä¸€ã¤ã®è¡¨ç¤ºä¸Šã®æ–‡å­—ã¨ã—ã¦è¦‹ãˆã‚‹æ–‡å­—åˆ—ã‚’æ§‹æˆã™ã‚‹æœ€å°ã®å˜ä½
ã€€wordï¼šå˜èªå˜ä½ã§ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã„ã¾ã™ã€‚ç©ºç™½æ–‡å­—ãªã©ã®åŒºåˆ‡ã‚Šæ–‡å­—ã§å˜èªã‚’åˆ†å‰²
ã€€lineï¼šè¡Œå˜ä½ã§ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã„ã¾ã™ã€‚æ”¹è¡Œæ–‡å­—ã§ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ†å‰²
ã€€sentenceï¼šæ–‡å˜ä½ã§ã‚»ã‚°ãƒ¡ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã„ã¾ã™ã€‚æ–‡ã®åŒºåˆ‡ã‚Šæ–‡å­—ï¼ˆãƒ”ãƒªã‚ªãƒ‰ã€ç–‘å•ç¬¦ã€æ„Ÿå˜†ç¬¦ãªã©ï¼‰ã§ãƒ†ã‚­ã‚¹ãƒˆã‚’åˆ†å‰²


**å‡ºé¡Œç¯„å›²**: 7.8.7
*/

export function reverse(str) {
    // æ–‡å­—åˆ—ã‚’ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåŒ–ã™ã‚‹
    const segmenter = new Intl.Segmenter("grapheme", { granularities: ["grapheme"] });
    const segments = segmenter.segment(str);

    // ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’é…åˆ—ã«å¤‰æ›ã—ã€åè»¢ã™ã‚‹
    const reversedSegments = Array.from(segments, segment => segment.segment).reverse();

    // åè»¢ã•ã‚ŒãŸã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚’çµåˆã—ã¦æ–‡å­—åˆ—ã‚’ç”Ÿæˆã™ã‚‹
    return reversedSegments.join("");
}

// ä½¿ç”¨ä¾‹
// const input = "å®¶æ— ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§";     // =>ğŸ‘¨â€ğŸ‘§â€ğŸ‘§ æ—å®¶
//  const input = "ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§ å®¶æ—";     // =>æ—å®¶ ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§
// const input = `"ğ ®·é‡å®¶"[0]`;     // =>]0["å®¶é‡ğ ®·"
// const input = `"ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§"[0]`;     // =>]0["ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§"
/*
console.log(input);
const reversedString = reverse(input);
console.log(reversedString); // "ğŸ‘¨â€ğŸ‘¨â€ğŸ‘§â€ğŸ‘§ æ—å®¶"
*/